#!/bin/bash

source /usr/local/bin/devops-func.sh
MODE="read"

argument1=""
argument2=""
shifted_arguments=0

if [ "$1" == "-f" ]; then
    argument1="-f"
    shift
    shifted_arguments=1
fi
if [ "$1" == "-n" ]; then
    argument1="-n"
    argument2="$2"
    shift
    shift
    shifted_arguments=2
fi

startup_checks "$MODE" "$1"
is_allowed_path_for_mode "$MODE" "$1"

if [ $shifted_arguments -eq 0 ]; then
    /usr/bin/tail "$1"
elif [ $shifted_arguments -eq 1 ]; then
    /usr/bin/tail $argument1 "$1"
elif [ $shifted_arguments -eq 2 ]; then
    /usr/bin/tail $argument1 $argument2 "$1"
fi

exit $?
